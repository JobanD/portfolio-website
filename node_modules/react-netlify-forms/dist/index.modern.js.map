{"version":3,"file":"index.modern.js","sources":["../src/netlify-form-context.js","../src/honeypot.js","../src/utils.js","../src/netlify-form-reducer.js","../src/netlify-form-component.js","../src/netlify-form.js","../src/recaptcha.js"],"sourcesContent":["import React from 'react'\n\nexport const NetlifyFormContext = React.createContext()\nNetlifyFormContext.displayName = 'NetlifyFormContext'\n\nexport const NetlifyFormProvider = ({ children, ...props }) => (\n  <NetlifyFormContext.Provider value={{ ...props }}>\n    {children}\n  </NetlifyFormContext.Provider>\n)\n\nexport function useNetlifyFormContext() {\n  return React.useContext(NetlifyFormContext)\n}\n","import React from 'react'\nimport { useNetlifyFormContext } from './netlify-form-context'\n\nexport const Honeypot = ({\n  label = `Leave the following field empty:`,\n  ...props\n}) => {\n  const { handleChange, honeypotName } = useNetlifyFormContext()\n\n  return (\n    <p hidden>\n      <label>\n        {label}{' '}\n        <input\n          type='text'\n          {...props}\n          name={honeypotName}\n          onChange={handleChange}\n        />\n      </label>\n    </p>\n  )\n}\n","import React from 'react'\n\nexport const encodeFormData = (data) => {\n  const formData = new FormData()\n\n  for (const key of Object.keys(data)) {\n    formData.append(key, data[key])\n  }\n\n  return formData\n}\n\nexport const isFunction = (x) => typeof x === 'function'\n\nexport const isEmptyChildren = (x) => React.Children.count(x) === 0\n","export default function (state, action) {\n  const { type, payload } = action\n  switch (type) {\n    case 'CHANGE_FORM_DATA': {\n      const { name, value, type } = payload\n      return {\n        ...state,\n        values: {\n          ...state.values,\n          [name]: type !== 'checkbox' ? value : payload.checked\n        }\n      }\n    }\n    case 'RESET_FORM': {\n      const initialData = payload\n      return {\n        ...state,\n        values: initialData\n      }\n    }\n    case 'SET_SUCCESS':\n      return {\n        ...state,\n        success: true,\n        error: false,\n        submitting: false,\n        submitted: true\n      }\n    case 'SET_ERROR':\n      return { ...state, success: false, error: true, submitting: false }\n    case 'SET_SUBMITTING':\n      return { ...state, submitting: true }\n    case 'SET_HONEYPOT_NAME':\n      return { ...state, honeypotName: payload }\n    case 'ENABLE_RECAPTCHA':\n      return { ...state, recaptchaEnabled: payload }\n    default:\n      throw new Error(`Action type \"${type}\" is not defined.`)\n  }\n}\n","import React from 'react'\nimport { isFunction, isEmptyChildren } from './utils'\nimport { useNetlifyFormContext } from './netlify-form-context'\n\nexport const NetlifyFormComponent = ({ children, ...props }) => {\n  const context = useNetlifyFormContext()\n  const {\n    formRef,\n    formName,\n    formAction,\n    honeypotName,\n    recaptchaEnabled,\n    handleSubmit,\n    handleReset\n  } = context\n\n  const netlifyProps = {}\n  if (honeypotName) {\n    netlifyProps['data-netlify-honeypot'] = honeypotName\n  }\n  if (recaptchaEnabled) {\n    netlifyProps['data-netlify-recaptcha'] = true\n  }\n\n  return (\n    <form\n      ref={formRef}\n      method='post'\n      name={formName}\n      action={formAction}\n      onSubmit={handleSubmit}\n      onReset={handleReset}\n      data-netlify\n      {...netlifyProps}\n      {...props}\n    >\n      {/* The `form-name` hidden field is required to support form submissions without JavaScript */}\n      <input type='hidden' name='form-name' value={formName} />\n\n      {children\n        ? isFunction(children)\n          ? children(context)\n          : !isEmptyChildren(children)\n          ? children\n          : null\n        : null}\n    </form>\n  )\n}\n","import React from 'react'\nimport { encodeFormData } from './utils'\nimport NetlifyFormReducer from './netlify-form-reducer'\nimport { NetlifyFormProvider } from './netlify-form-context'\nimport { NetlifyFormComponent } from './netlify-form-component'\n\nexport const useNetlifyForm = ({\n  name = 'Form',\n  action = '',\n  honeypotName = '',\n  enableRecaptcha = false,\n  onSuccess = () => {},\n  onFailure = () => {}\n}) => {\n  const initialValues = {}\n  const initialState = {\n    success: false,\n    error: false,\n    submitting: false,\n    submitted: false,\n    response: null,\n    values: initialValues,\n    formName: name,\n    formAction: action,\n    honeypotName,\n    recaptchaEnabled: enableRecaptcha,\n    recaptchaInvisible: false\n  }\n  const [state, dispatch] = React.useReducer(NetlifyFormReducer, initialState)\n  const formRef = React.useRef(null)\n  const recaptchaRef = React.useRef(null)\n\n  const handleChange = ({ target: { name, value, files } }) => {\n    dispatch({\n      type: 'CHANGE_FORM_DATA',\n      payload:\n        files != null && files.length > 0\n          ? { name, value: files[0] }\n          : { name, value }\n    })\n  }\n  const handleReset = () => {\n    dispatch({\n      type: 'RESET_FORM',\n      payload: initialValues\n    })\n  }\n  const handleSubmit = async (event = null, values = {}) => {\n    if (event) {\n      event.preventDefault()\n    }\n\n    const formData = {\n      'form-name': state.formName,\n      ...values,\n      ...state.values\n    }\n\n    if (state.recaptchaEnabled) {\n      if (recaptchaRef.current === null) {\n        throw new Error(\n          'reCAPTCHA is enabled but reference not found, make sure you render the reCAPTCHA-component somewhere.'\n        )\n      }\n      const isRecaptchaInvisible =\n        recaptchaRef.current.props.size === 'invisible'\n      const recaptchaValue = isRecaptchaInvisible\n        ? await recaptchaRef.current.executeAsync()\n        : recaptchaRef.current.getValue()\n\n      formData['g-recaptcha-response'] = recaptchaValue\n    }\n\n    dispatch({ type: 'SET_SUBMITTING' })\n\n    const response = await fetch('/', {\n      method: 'POST',\n      body: encodeFormData(formData)\n    })\n    const context = { state, formRef, recaptchaRef }\n    if (response.status !== 200) {\n      dispatch({ type: 'SET_ERROR' })\n      return onFailure(response, context)\n    }\n    dispatch({ type: 'SET_SUCCESS' })\n    return onSuccess(response, context)\n  }\n  const setHoneypotName = React.useCallback((ref) => {\n    return dispatch({ type: 'SET_HONEYPOT_NAME', payload: ref })\n  }, [])\n  const enableRecaptchaHandler = React.useCallback((enable) => {\n    return dispatch({ type: 'ENABLE_RECAPTCHA', payload: enable })\n  }, [])\n\n  return {\n    ...state,\n    // add additional handlers for access through context:\n    handleChange,\n    handleSubmit,\n    handleReset,\n    setHoneypotName,\n    enableRecaptcha: enableRecaptchaHandler,\n    // references:\n    formRef,\n    recaptchaRef\n  }\n}\n\nexport const NetlifyForm = ({ children, formProps, ...props }) => {\n  const context = useNetlifyForm(props)\n\n  return (\n    <NetlifyFormProvider {...context}>\n      <NetlifyFormComponent {...formProps}>{children}</NetlifyFormComponent>\n    </NetlifyFormProvider>\n  )\n}\n","import React from 'react'\nimport { useNetlifyFormContext } from './netlify-form-context'\nimport GoogleRecaptcha from 'react-google-recaptcha'\n\nexport const Recaptcha = ({\n  siteKey = '',\n  invisible = false,\n  ...passThroughProps\n}) => {\n  const { recaptchaRef } = useNetlifyFormContext()\n\n  return (\n    <GoogleRecaptcha\n      {...passThroughProps}\n      sitekey={siteKey}\n      ref={recaptchaRef}\n      {...(invisible ? { size: 'invisible' } : {})}\n    />\n  )\n}\n"],"names":["NetlifyFormContext","React","createContext","displayName","NetlifyFormProvider","children","props","useNetlifyFormContext","useContext","Honeypot","label","handleChange","honeypotName","encodeFormData","data","formData","FormData","Object","keys","key","append","isFunction","x","isEmptyChildren","Children","count","state","action","type","payload","name","value","values","checked","initialData","success","error","submitting","submitted","recaptchaEnabled","Error","NetlifyFormComponent","context","formRef","formName","formAction","handleSubmit","handleReset","netlifyProps","useNetlifyForm","enableRecaptcha","onSuccess","onFailure","initialValues","initialState","response","recaptchaInvisible","useReducer","NetlifyFormReducer","dispatch","useRef","recaptchaRef","target","files","length","event","fetch","method","body","status","preventDefault","recaptchaValue","current","isRecaptchaInvisible","size","executeAsync","getValue","setHoneypotName","useCallback","ref","enableRecaptchaHandler","enable","NetlifyForm","formProps","Recaptcha","siteKey","invisible","passThroughProps"],"mappings":"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"}